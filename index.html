<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>常用站点</title>
<meta name="color-scheme" content="light dark" />

<style>
:root{
  --bg: #0b0c10;
  --text: rgba(255,255,255,.92);
  --muted: rgba(255,255,255,.65);

  --icon: 72px;        /* 图标大小（Edge 核心） */
  --gap: 14px;         /* 图标间距 */
}

@media (prefers-color-scheme: light){
  :root{
    --bg:#f6f7fb;
    --text: rgba(0,0,0,.88);
    --muted: rgba(0,0,0,.55);
  }
}

*{ box-sizing:border-box; }

body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, "PingFang SC","Microsoft YaHei", Arial;
  background:
    radial-gradient(1200px 900px at 20% 10%, rgba(120,150,255,.18), transparent 60%),
    radial-gradient(900px 700px at 85% 20%, rgba(255,170,100,.14), transparent 60%),
    var(--bg);
  color: var(--text);
  min-height:100vh;
}

/* 内容区域 */
.wrap{
  max-width: 1100px;
  margin: 0 auto;
  padding: 12px 10px 48px;
}

/* 顶部：只留一个 + */
.topbar{
  display:flex;
  justify-content:flex-end;
  padding: 4px 4px 12px;
}

.add{
  width:44px;
  height:44px;
  border-radius:50%;
  border:none;
  background: rgba(255,255,255,.14);
  backdrop-filter: blur(10px);
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
}
.add svg{ width:20px;height:20px;fill:var(--text); }

/* Edge 核心：图标铺满 */
.grid{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(88px, 1fr));
  gap: var(--gap);
  align-items:start;
}

/* 单个站点 */
.site{
  text-decoration:none;
  color:inherit;
  padding: 10px 6px 14px;
  border-radius:16px;
  transition: transform .12s ease, background .12s ease;
  text-align:center;
}
.site:hover{
  transform: scale(1.08);
  background: rgba(255,255,255,.10);
}

/* 图标 = 主体（无外框） */
.icon{
  width: var(--icon);
  height: var(--icon);
  margin: 0 auto 8px;
}
.icon img{
  width:100%;
  height:100%;
  object-fit: contain;
}

/* 名字：弱化 */
.name{
  font-size:13px;
  font-weight:600;
  line-height:1.2;
  opacity:.95;
}

/* 添加面板 */
.mask{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.45);
  display:none;
  align-items:flex-end;
  justify-content:center;
  z-index:10;
}
.mask.show{ display:flex; }

.panel{
  width:100%;
  max-width:520px;
  background: rgba(255,255,255,.12);
  backdrop-filter: blur(16px);
  border-radius:22px 22px 0 0;
  padding:16px;
}

.input{
  width:100%;
  padding:14px;
  margin-top:10px;
  border:none;
  border-radius:14px;
  background: rgba(255,255,255,.18);
  font-size:15px;
}

.row{
  display:flex;
  gap:10px;
  margin-top:14px;
}

.btn{
  flex:1;
  padding:14px;
  border:none;
  border-radius:14px;
  background: rgba(255,255,255,.18);
  font-size:15px;
}
.btn.primary{
  background: linear-gradient(135deg, rgba(120,150,255,.45), rgba(120,150,255,.25));
}

/* 空态 */
.empty{
  color:var(--muted);
  text-align:center;
  padding:20px;
}
</style>
</head>

<body>
<div class="wrap">
  <div class="topbar">
    <button class="add" id="addBtn" aria-label="添加">
      <svg viewBox="0 0 24 24"><path d="M11 5h2v14h-2V5zm-6 6h14v2H5v-2z"/></svg>
    </button>
  </div>

  <div id="grid" class="grid"></div>
  <div id="empty" class="empty" style="display:none;">点右上角 + 添加常用站点</div>
</div>

<!-- 添加 -->
<div id="mask" class="mask">
  <div class="panel">
    <input id="name" class="input" placeholder="名称（可选）" />
    <input id="url" class="input" placeholder="网址，例如 youtube.com" />
    <div class="row">
      <button class="btn" id="cancel">取消</button>
      <button class="btn primary" id="save">保存</button>
    </div>
  </div>
</div>

<script>
const KEY = "edge_final_sites";

const grid = document.getElementById("grid");
const empty = document.getElementById("empty");
const mask = document.getElementById("mask");

const addBtn = document.getElementById("addBtn");
const cancel = document.getElementById("cancel");
const save = document.getElementById("save");

const nameInput = document.getElementById("name");
const urlInput = document.getElementById("url");

function load(){
  try{
    const d = JSON.parse(localStorage.getItem(KEY));
    return Array.isArray(d)?d:[];
  }catch{ return []; }
}
function saveData(d){
  localStorage.setItem(KEY, JSON.stringify(d));
}

function icon(domain){
  return `https://www.google.com/s2/favicons?domain=${domain}&sz=128`;
}

let sites = load();

if(sites.length===0){
  sites=[
    ["YouTube","https://www.youtube.com"],
    ["Google","https://www.google.com"],
    ["GitHub","https://github.com"],
    ["Cloudflare","https://dash.cloudflare.com"],
    ["Outlook","https://outlook.office.com"],
    ["ChatGPT","https://chat.openai.com"]
  ].map(([n,u])=>({name:n,url:u}));
  saveData(sites);
}

function render(){
  grid.innerHTML="";
  empty.style.display = sites.length? "none":"block";

  sites.forEach(s=>{
    const a=document.createElement("a");
    a.className="site";
    a.href=s.url;
    a.target="_blank";

    const d=new URL(s.url).hostname.replace(/^www\./,"");

    a.innerHTML=`
      <div class="icon"><img src="${icon(d)}"></div>
      <div class="name">${s.name||d}</div>
    `;
    grid.appendChild(a);
  });
}

addBtn.onclick=()=>{
  mask.classList.add("show");
  urlInput.focus();
};
cancel.onclick=()=>mask.classList.remove("show");

save.onclick=()=>{
  let url=urlInput.value.trim();
  if(!url) return;
  if(!/^https?:\/\//) url="https://"+url;
  const name=nameInput.value.trim();
  sites.unshift({name,url});
  saveData(sites);
  nameInput.value="";
  urlInput.value="";
  mask.classList.remove("show");
  render();
};

mask.onclick=e=>{
  if(e.target===mask) mask.classList.remove("show");
};

render();
</script>
</body>
</html>
